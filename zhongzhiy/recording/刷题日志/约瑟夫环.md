> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [leetcode.cn](https://leetcode.cn/discuss/post/764813/yue-se-fu-huan-wen-ti-de-san-chong-jie-f-w9q1/)


问题描述：

> 0,1,···,n-1 这 n 个数字排成一个圆圈，从数字 0 开始，每次从这个圆圈里删除第 m 个数字（删除后从下一个数字开始计数）。求出这个圆圈里剩下的最后一个数字。

> 例如，0、1、2、3、4 这 5 个数字组成一个圆圈，从数字 0 开始每次删除第 3 个数字，则删除的前 4 个数字依次是 2、0、4、1，因此最后剩下的数字是 3。


### 递归公式解决

我们回顾上面的优化过程，上面用求余可以解决 m 比 n 大很多很多的情况 (即理论上需要转很多很多圈的情况)。但是还可能存在 n 本身就很大的情况，无论是顺序表 ArrayList 还是链表 LinkedList 去频繁查询、删除都是很低效的。

所以聪明的人就开始从数据找一些规律或者关系。

先抛出公式：

```
f(n,m)=(f(n-1,m)+m)%n
f(n,m)指n个人，报第m个编号出列最终编号
```

下面要认真看一下我的分析过程：

我们举个例子，有`0 1 2 3 4 5 6 7 8 9`十个数字，假设 m 为 3, 最后结果可以先记成 **f(10,3)**，即使我们不知道它是多少。

当进行第一次时候，找到元素`2` 删除，此时还剩 9 个元素，但**起始位置已经变成元素 3**。等价成`3 4 5 6 7 8 9 0 1`这 9 个数字重写开始找。

![](https://pic.leetcode-cn.com/1620465222-bNINmu-file_1620465222660)

此时这个序列最终剩下的一个值即为 **f(10,3)**，这个序列的值和 f(9,3) 不同，**但是都是 9 个数且 m 等于 3，所以其删除位置是相同的，即算法大体流程是一致的，只是各位置上的数字不一样**。所以我们需要做的事情是**找找这个序列上和 f(9,3) 值上有没有什么联系**。

寻找过程中别忘记两点，首先可通过 **% 符号 ** 对数字有效扩充，即我们可以将`3 4 5 6 7 8 9 0 1`这个序列看成 (3,4,5,6,7,8,9,10,11)%10. 这里的 10 即为此时的 n 数值。

另外数值如果是连续的，那么最终一个结果的话是可以找到联系的 (差值为一个定制)。所以我们可以就找到 f(10,3) 和 f(9,3)值之间结果的关系，可以看下图：

![](https://pic.leetcode-cn.com/1620465222-EZkOOc-file_1620465222663)

所以 f(10,3) 的结果就可以转化为 f(9,3) 的表达, 后面也是同理：

```
f(10,3)=(f(9,3)+3)%10
f(9,3)=(f(8,3)+3)%9
……
f(2,3)=(f(1,3)+3)%2
f(1,3)=0
```

这样，我们就不用模拟操作，可以直接从数值的关系找到递推的关系，可以轻轻松松的写下代码：

```
class Solution {
    int index=0;
    public int lastRemaining(int n, int m) {
         if(n==1)
            return 0;      
        return (lastRemaining(n-1,m)+m)%n;
    }
}
```

但是递归效率因为有个来回的规程，效率相比直接迭代差一些，也可从前往后迭代：

```
class Solution {
    public int lastRemaining(int n, int m) {
        int value=0;
            for(int i=1;i<=n;i++)
            {
                value=(value+m)%i;
            }
            return  value;
    }
}
```

### 结语

我想，通过本篇文章你应该掌握和理解了约瑟夫环问题，这种裸的约瑟夫环问题出现的概率很大，考察很频繁，链表模拟是根本思想，有序集合模拟链表是提升，而公式递推才是最有学习价值的地方，如果你刚开始接触不理解可以多看几遍。如果能用公式递推给面试官说两句，讲讲原理，那一定会让面试官眼前一亮的！

> 我整理了一份力扣题解和算法学习的仓库 [https://github.com/javasmall/bigsai-algorithm](https://leetcode.cn/link/?target=https%3A%2F%2Fgithub.com%2Fjavasmall%2Fbigsai-algorithm) 欢迎 star






