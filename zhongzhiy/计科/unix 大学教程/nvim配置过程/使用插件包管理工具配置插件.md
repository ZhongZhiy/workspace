---
tags:
  - vim
---
ä»¥ä¸‹æ˜¯å¯¹ä½ æä¾›çš„è¿™æ®µé…ç½®è¯´æ˜çš„**ä¸­æ–‡ç¿»è¯‘ä¸è¯¦ç»†è§£é‡Š**ï¼š

---

### åŸå§‹å†…å®¹ï¼š

```lua
-- NOTE: Plugins can also be added by using a table,
-- with the first argument being the link and the following
-- keys can be used to configure plugin behavior/loading/etc.
--
-- Use `opts = {}` to automatically pass options to a plugin's `setup()` function, forcing the plugin to be loaded.
--

-- Alternatively, use `config = function() ... end` for full control over the configuration.
-- If you prefer to call `setup` explicitly, use:
--    {
--        'lewis6991/gitsigns.nvim',
--        config = function()
--            require('gitsigns').setup({
--                -- Your gitsigns configuration here
--            })
--        end,
--    }
--
```

---

### âœ… ä¸­æ–‡ç¿»è¯‘ï¼š

```lua
-- æ³¨æ„ï¼šæ’ä»¶ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªè¡¨ï¼ˆtableï¼‰æ¥æ·»åŠ ï¼Œ
-- è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ’ä»¶çš„ GitHub é“¾æ¥ï¼Œåç»­çš„é”®å€¼å¯ä»¥ç”¨æ¥é…ç½®æ’ä»¶çš„è¡Œä¸ºã€åŠ è½½æ–¹å¼ç­‰ã€‚

-- ä½¿ç”¨ `opts = {}` å¯ä»¥è‡ªåŠ¨å°†é€‰é¡¹ä¼ é€’ç»™æ’ä»¶çš„ `setup()` å‡½æ•°ï¼Œå¹¶å¼ºåˆ¶åŠ è½½è¯¥æ’ä»¶ã€‚
--

-- æˆ–è€…ï¼Œä½¿ç”¨ `config = function() ... end` æ¥å®Œå…¨æ§åˆ¶æ’ä»¶çš„é…ç½®ã€‚
-- å¦‚æœä½ å¸Œæœ›æ˜¾å¼è°ƒç”¨ `setup` å‡½æ•°ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š
--    {
--        'lewis6991/gitsigns.nvim',
--        config = function()
--            require('gitsigns').setup({
--                -- åœ¨è¿™é‡Œå†™ä½ çš„ gitsigns é…ç½®
--            })
--        end,
--    }
--
```

---

## ğŸ§  ä½œç”¨è¯¦è§£

è¿™æ®µè¯æ˜¯åœ¨è§£é‡Š **å¦‚ä½•åœ¨ Neovim çš„ Lua æ’ä»¶ç®¡ç†å™¨ä¸­ï¼ˆå¦‚ lazy.nvim æˆ– packer.nvimï¼‰é…ç½®æ’ä»¶**ã€‚å®ƒå±•ç¤ºäº†ä¸¤ç§ä¸»æµæ–¹å¼æ¥ä¸ºæ’ä»¶æ·»åŠ é…ç½®ã€‚

---

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ `opts = {}` ç®€åŒ–é…ç½®ï¼ˆæ¨èç”¨äºç®€å•é…ç½®ï¼‰

```lua
{
  'lewis6991/gitsigns.nvim',
  opts = {
    -- è¿™é‡Œå†™é…ç½®é¡¹
  },
}
```

- `opts` æ˜¯ "options" çš„ç¼©å†™ï¼›
- å½“ä½ ä½¿ç”¨ `opts = {}` æ—¶ï¼ŒNeovim ä¼šè‡ªåŠ¨æ£€æµ‹è¿™ä¸ªæ’ä»¶æ˜¯å¦æä¾›äº† `.setup()` å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä½ å†™çš„é…ç½®ï¼›
- å®ƒé€‚ç”¨äºå¤§å¤šæ•°ç°ä»£æ’ä»¶ï¼ˆå¦‚ `gitsigns.nvim`, `telescope.nvim`, `nvim-treesitter` ç­‰ï¼‰ï¼Œè¿™äº›æ’ä»¶é€šå¸¸éƒ½æ”¯æŒâ€œé»˜è®¤é…ç½®+è‡ªå®šä¹‰é€‰é¡¹â€çš„æ–¹å¼ï¼›
- ä¼˜ç‚¹ï¼šç®€æ´ï¼Œé€‚åˆå¿«é€Ÿå¯ç”¨æ’ä»¶å¹¶åšåŸºæœ¬é…ç½®ã€‚

---

### æ–¹æ³•äºŒï¼šä½¿ç”¨ `config = function() ... end` æ‰‹åŠ¨é…ç½®ï¼ˆæ¨èç”¨äºå¤æ‚é…ç½®ï¼‰

```lua
{
  'lewis6991/gitsigns.nvim',
  config = function()
    require('gitsigns').setup({
      -- åœ¨è¿™é‡Œå†™ä½ çš„ gitsigns é…ç½®
    })
  end,
}
```

- `config` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ’ä»¶åŠ è½½åä¼šè¢«æ‰§è¡Œï¼›
- ä½ å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­æ‰‹åŠ¨è°ƒç”¨æ’ä»¶çš„ `.setup()` æ–¹æ³•ï¼Œå¹¶ä¼ å…¥å®Œæ•´çš„é…ç½®ï¼›
- ä¼˜ç‚¹ï¼šæ›´çµæ´»ï¼Œå¯ä»¥æ‰§è¡Œä»»æ„ Lua ä»£ç ï¼Œæ¯”å¦‚åˆ¤æ–­ç³»ç»Ÿã€å»¶è¿ŸåŠ è½½ã€æ¡ä»¶é…ç½®ç­‰ï¼›
- æ¨èå½“ä½ éœ€è¦å¯¹æ’ä»¶è¿›è¡Œ**é«˜çº§å®šåˆ¶**æ—¶ä½¿ç”¨æ­¤æ–¹å¼ã€‚

---

## ğŸ” å¯¹æ¯”æ€»ç»“

| æ–¹å¼ | è¯­æ³• | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|----------|------|------|
| `opts = {}` | ç®€æ´ï¼Œåªéœ€æä¾›é…ç½®è¡¨ | å¿«é€Ÿå¯ç”¨æ’ä»¶å¹¶è®¾ç½®åŸºç¡€é€‰é¡¹ | é…ç½®ç®€æ´ï¼Œå¯è¯»æ€§å¼º | ä¸é€‚åˆå¤æ‚é€»è¾‘æˆ–å¤šä¸ªæ’ä»¶ä¾èµ– |
| `config = function() ... end` | æ‰‹åŠ¨è°ƒç”¨ `setup()` æˆ–å…¶ä»–åˆå§‹åŒ–é€»è¾‘ | éœ€è¦è‡ªå®šä¹‰åŠ è½½è¡Œä¸ºæˆ–å¤æ‚é…ç½® | å®Œå…¨æ§åˆ¶æ’ä»¶è¡Œä¸º | å†™æ³•è¾ƒç¹ç |

---

## ğŸ›  ç¤ºä¾‹å¯¹æ¯”

### âœ… ä½¿ç”¨ `opts` çš„ç®€åŒ–å†™æ³•ï¼š

```lua
{
  'lewis6991/gitsigns.nvim',
  opts = {
    signs = {
      add          = { text = '+' },
      change       = { text = '~' },
      delete       = { text = '_' },
      topdelete    = { text = 'â€¾' },
      changedelete = { text = 'â‹¯' },
    },
    on_attach = function(bufnr)
      -- è‡ªå®šä¹‰æŒ‰é”®æ˜ å°„
      vim.keymap.set('n', ']c', &diff ? ']c' : '<cmd>Gitsigns next_hunk<CR>', { buffer = bufnr })
    end,
  },
}
```

### âœ… ä½¿ç”¨ `config` çš„å®Œæ•´å†™æ³•ï¼š

```lua
{
  'lewis6991/gitsigns.nvim',
  config = function()
    require('gitsigns').setup({
      signs = {
        add = { text = '+' },
        change = { text = '~' },
        delete = { text = '_' },
      },
      on_attach = function(bufnr)
        vim.keymap.set('n', ']c', '<cmd>Gitsigns next_hunk<CR>', { buffer = bufnr })
      end,
    })
  end,
}
```

---

## âš™ï¸ å…¶ä»–å¸¸è§å¯é€‰å­—æ®µï¼ˆKeysï¼‰

é™¤äº† `opts` å’Œ `config`ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å­—æ®µæ¥æ§åˆ¶æ’ä»¶è¡Œä¸ºï¼š

| å­—æ®µå | å«ä¹‰ |
|--------|------|
| `cond` | æ¡ä»¶åŠ è½½æ’ä»¶ï¼ˆä¾‹å¦‚åªåœ¨æŸäº›ç³»ç»Ÿä¸‹åŠ è½½ï¼‰ |
| `lazy` | è®¾ç½®ä¸º `true` è¡¨ç¤ºæ‡’åŠ è½½ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ |
| `priority` | æ’ä»¶ä¼˜å…ˆçº§ï¼ˆå½±å“åŠ è½½é¡ºåºï¼‰ |
| `event` / `ft` / `cmd` | æ‡’åŠ è½½è§¦å‘æ¡ä»¶ï¼ˆä¾‹å¦‚æ‰“å¼€ç‰¹å®šæ–‡ä»¶ç±»å‹æˆ–å‘½ä»¤æ—¶åŠ è½½ï¼‰ |
| `dependencies` | æ’ä»¶ä¾èµ–é¡¹ï¼ˆè‡ªåŠ¨åŠ è½½æ‰€éœ€æ’ä»¶ï¼‰ |

---

## âœ… æ¨èå®è·µ

- **æ–°æ‰‹/ç®€å•é…ç½®**ï¼šä½¿ç”¨ `opts = {}` æ›´åŠ æ–¹ä¾¿å¿«æ·ï¼›
- **è¿›é˜¶ç”¨æˆ·/è‡ªå®šä¹‰éœ€æ±‚å¤š**ï¼šä½¿ç”¨ `config = function()` èƒ½è·å¾—æœ€å¤§çµæ´»æ€§ï¼›
- å¤šæ•°ç°ä»£æ’ä»¶ï¼ˆå°¤å…¶æ˜¯åŸºäº `lazy.nvim` æ„å»ºçš„æ’ä»¶ï¼‰éƒ½æ”¯æŒè¿™ä¸¤ç§æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ã€‚

---

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ `lazy.nvim` æˆ– `packer.nvim` å¹¶å¸Œæœ›æˆ‘å¸®ä½ å†™å‡ºæŸä¸ªå…·ä½“æ’ä»¶çš„å®Œæ•´é…ç½®ï¼Œè¯·å‘Šè¯‰æˆ‘æ’ä»¶åç§°å’Œä½ æƒ³è¦çš„åŠŸèƒ½ï¼æˆ‘å¯ä»¥ä¸ºä½ ç”Ÿæˆå¯¹åº”çš„é…ç½®ç‰‡æ®µã€‚