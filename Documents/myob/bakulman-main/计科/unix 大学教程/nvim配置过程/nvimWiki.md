---
tags:
  - vim
---
ä»¥ä¸‹æ˜¯å¯¹ä½ ä¸Šä¼ çš„å››ä¸ªæ–‡ä»¶å†…å®¹çš„å®Œæ•´ä¸­æ–‡ç¿»è¯‘ï¼š

---

## ğŸ“„ Home.mdï¼ˆé¦–é¡µï¼‰

æ¬¢è¿æ¥åˆ° nvimdots çš„ Wikiï¼

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ `Lua` ç¼–å†™çš„ Neovim é…ç½®ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨å’Œè‡ªå®šä¹‰çš„åŸºç¡€é…ç½®ã€‚

### ç›´æ¥ä½¿ç”¨

è¯·å‚è€ƒ [Wiki: å¿…è¦æ¡ä»¶](https://github.com/ayamir/nvimdots/wiki/Prerequisites) å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…ã€‚

### è‡ªå®šä¹‰ä½¿ç”¨

è¯·æŸ¥é˜… [Wiki: ä½¿ç”¨è¯´æ˜](https://github.com/ayamir/nvimdots/wiki/Usage)ï¼Œäº†è§£å¦‚ä½•æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚è°ƒæ•´æ­¤é…ç½®ã€‚

### åŒ…å«çš„æ’ä»¶

è¯¦æƒ…è¯·å‚è§ [Wiki: æ’ä»¶åˆ—è¡¨](https://github.com/ayamir/nvimdots/wiki/Plugins)ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰é›†æˆæ’ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚

### é»˜è®¤å¿«æ·é”®

æŸ¥çœ‹ [Wiki: å¿«æ·é”®](https://github.com/ayamir/nvimdots/wiki/Keybindings)ï¼Œäº†è§£é»˜è®¤çš„å¿«æ·é”®è®¾ç½®ã€‚

### NixOS æ”¯æŒ

å¦‚éœ€ NixOS ä¸‹çš„é…ç½®æ”¯æŒï¼Œè¯·æŸ¥é˜… [Wiki: NixOS æ”¯æŒ](https://github.com/ayamir/nvimdots/wiki/NixOS-Support) é¡µé¢ã€‚

### å¸¸è§é—®é¢˜ FAQ

å¸¸è§é—®é¢˜è§£ç­”è¯·å‚è€ƒ [Wiki: é—®é¢˜æ±‡æ€»](https://github.com/ayamir/nvimdots/wiki/Issues)ã€‚

### çŸ¥è¯†èŠ±å›­ï¼ˆKnowledge Gardenï¼‰

æ›´å¤šé«˜çº§æŠ€å·§å’ŒçŸ¥è¯†ï¼Œè¯·æŸ¥çœ‹ [Wiki: çŸ¥è¯†èŠ±å›­](https://github.com/ayamir/nvimdots/wiki/Knowledge-Garden)ã€‚

å†æ¬¡æ„Ÿè°¢ä½ ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼

---

## ğŸ“„ Issues.mdï¼ˆé—®é¢˜æ±‡æ€»ï¼‰

### Windows ä¸Šå‰ªè´´æ¿æ— æ³•æ­£å¸¸å·¥ä½œï¼Ÿ

è¯·å‚è€ƒ [Neovim å®˜æ–¹ FAQ](https://github.com/neovim/neovim/wiki/FAQ#how-to-use-the-windows-clipboard-from-wsl)ï¼Œå¹¶ç¡®ä¿ `win32yank.exe` å·²æ·»åŠ åˆ°ä½ çš„ `$PATH` ç¯å¢ƒå˜é‡ä¸­ã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ `clip.exe` è¿›è¡Œå¤åˆ¶æ“ä½œï¼Œå› ä¸ºå®ƒä¸èƒ½æ­£ç¡®å¤„ç† UTF-8 ç¼–ç å­—ç¬¦ä¸²ã€‚

æ›´å¤šä¿¡æ¯è¯·å‚è§æ­¤ issueï¼š  
[https://github.com/ayamir/nvimdots/issues/762](https://github.com/ayamir/nvimdots/issues/762)

### LSP æœåŠ¡å™¨æ— æ³•è‡ªåŠ¨å¯åŠ¨ï¼Ÿ

è¯·æŸ¥é˜… [nvim-lspconfig çš„æœåŠ¡å™¨é…ç½®æ–‡æ¡£](https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md)ï¼Œä»¥ç¡®ä¿ä½ çš„é¡¹ç›®ç›®å½•èƒ½è¢«è¯†åˆ«ä¸ºæœ‰æ•ˆçš„æ ¹ç›®å½•ã€‚ä¾‹å¦‚å¯¹äº `gopls`ï¼ˆGo è¯­è¨€æœåŠ¡å™¨ï¼‰æ¥è¯´ï¼Œéœ€è¦å­˜åœ¨ `.mod` æ–‡ä»¶ç­‰æ ‡è¯†æ¥è§¦å‘ LSP å¯åŠ¨ã€‚

---

## ğŸ“„ Keybindings.mdï¼ˆå¿«æ·é”®ç»‘å®šï¼‰

### Snippetsï¼ˆä»£ç ç‰‡æ®µï¼‰ç›¸å…³å¿«æ·é”®

- **`lua/keymap/completion.lua`**  
  https://github.com/ayamir/nvimdots/blob/main/lua/keymap/completion.lua

- **`lua/modules/configs/completion/cmp.lua`**  
  ç”¨äºè¡¥å…¨ç›¸å…³çš„å¿«æ·é”®  
  https://github.com/ayamir/nvimdots/blob/main/lua/modules/configs/completion/cmp.lua

- **`lua/keymap/editor.lua`**  
  https://github.com/ayamir/nvimdots/blob/main/lua/keymap/editor.lua

- **`lua/keymap/lang.lua`**  
  https://github.com/ayamir/nvimdots/blob/main/lua/keymap/lang.lua

- **`lua/keymap/tool.lua`**  
  https://github.com/ayamir/nvimdots/blob/main/lua/keymap/tool.lua

---

## ğŸ“„ Knowledge-Garden.mdï¼ˆçŸ¥è¯†èŠ±å›­ï¼‰

### ä»£ç ç‰‡æ®µ Snippets çš„é…ç½®

åŸºç¡€é…ç½®ä¸­åŒ…å«äº†ä» `friendly-snippets` ä¸­ç›´æ¥å¤åˆ¶çš„ `package.json` æ–‡ä»¶ï¼Œä½äº `snips` ç›®å½•ä¸‹ã€‚å¦‚æœä½ éœ€è¦æ›´é«˜çº§çš„ä½¿ç”¨æ–¹å¼ï¼Œè¯·å‚è€ƒ [LuaSnip æ–‡æ¡£](https://github.com/L3MON4D3/LuaSnip/blob/master/DOC.md)ã€‚

#### æ·»åŠ è‡ªå·±çš„ Snippetï¼ˆä»¥ Go ä¸ºä¾‹ï¼‰ï¼š
1. æ£€æŸ¥ä½ çš„è¯­è¨€åœ¨ `package.json` ä¸­å®šä¹‰çš„ snippet æ–‡ä»¶ä½ç½®ã€‚
2. åˆ›å»º `snippets/go.json` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥å¦‚ä¸‹æ ¼å¼çš„å†…å®¹ï¼š

```json
{
  "func main": {
    "prefix": "main",
    "body": [
      "func main() {",
      "\t$0",
      "}"
    ],
    "description": "Go main function"
  }
}
```

### C/C++ ç¼–è¯‘å™¨ä¾èµ–é¡¹

ç¡®ä¿ä»¥ä¸‹å·¥å…·ä¹‹ä¸€å·²å®‰è£…å¹¶åœ¨ä½ çš„ `$PATH` ä¸­ï¼ˆæ ¹æ®ä½ ä½¿ç”¨çš„è¯­è¨€å†³å®šï¼‰ï¼š
- `clang++`
- `clang`
- `gcc`
- `g++`

#### macOS ç”¨æˆ·ï¼š
é€šå¸¸å¯ä»¥é€šè¿‡å®‰è£… LLVM æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒLLVM åŒ…å«äº†å®Œæ•´çš„å·¥å…·é“¾ï¼š

```bash
brew install llvm
```

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `nix-darwin`ï¼Œè¯·å°† `pkgs.llvm` æ·»åŠ åˆ° `environment.systemPackages` ä¸­ï¼š

ç¤ºä¾‹é…ç½®æ–‡ä»¶ `darwin-configuration.nix`ï¼š

```nix
{ config, pkgs, lib, ... }:
let
  inherit (pkgs) callPackage fetchFromGitHub;
  inherit (builtins) fetchTarball;
  homeDir = builtins.getEnv "HOME";
in
{
  environment.systemPackages = with pkgs; [
    llvmPackages
  ];

  # å°† nix å®‰è£…çš„ shell åŠ å…¥ /etc/shells
  shells = with pkgs; [
    zsh
  ];

  # è®¾ç½®ç¯å¢ƒå˜é‡ä¼ é€’ç»™ zshrc
  variables = {
    PATH = "${pkgs.llvmPackages.out}/bin:$PATH";
  };

  services.nix-daemon.enable = true;
}
```

---

## ğŸ§ NixOS-Support.mdï¼ˆNixOS æ”¯æŒï¼‰

### å…³äº lazy-lock.json çš„æ›´æ–°æœºåˆ¶

å½“ `lazy-lock.fixed.json` çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå³ä¸Šæ¸¸ `lazy-lock.json` è¢«ä¿®æ”¹ï¼‰ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ `lazy-lock.json` æ–‡ä»¶ï¼Œé€šè¿‡åˆå¹¶ç°æœ‰ `lazy-lock.json`ï¼ˆä¸å— `nix` ç®¡ç†ï¼‰å’Œ `lazy-lock.fixed.json` çš„å†…å®¹ç”Ÿæˆã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`lazy-lock.fixed.json` ä¸­çš„ç‰ˆæœ¬ä¼˜å…ˆçº§æ›´é«˜ã€‚è¿™æ„å‘³ç€ï¼š
- å·²ç»ç”±ä¸Šæ¸¸ç®¡ç†çš„æ’ä»¶å°†ä½¿ç”¨ `lazy-lock.fixed.json` ä¸­çš„ç‰ˆæœ¬ï¼›
- æ–°å¢ä½†å°šæœªæäº¤åˆ°ä¸Šæ¸¸çš„æ’ä»¶åˆ™ä¼šè¢«ä¿ç•™ã€‚

---

### ç¤ºä¾‹ NixOS é…ç½®

```nix
{ config, pkgs, lib, ... }:
{
  # å®‰è£…åˆ°ç”¨æˆ·ä½œç”¨åŸŸ
  home.packages = with pkgs; [
    go
  ];

  programs.neovim = {
    # ä»…å¯¹ Neovim å¯è§çš„åŒ…
    nvimdots = {
      # æ„å»ºæ‰€éœ€ä¾èµ–ï¼ˆincludeã€libã€pkgconfigï¼‰
      extraDependentPackages = with pkgs; [ icu ];
      
      # Haskell åŒ…å¯é€šè¿‡ nvimdots é€‰é¡¹è½»æ¾å®‰è£…
      extraHaskellPackages = hs: with hs; [ ghcup ];
    };

    # å…¶ä»–è¿è¡Œæ—¶ä¾èµ–åŒ…
    extraPackages = with pkgs; [
      go
      # æŸäº›è¯­è¨€éœ€è¦ä½¿ç”¨ wrapper
      rWrapper.override {
        packages = with pkgs.rPackages; [
          # R åŒ…åˆ—è¡¨
        ];
      }
    ];
  };
}
```

---

### Home Manager é…ç½®ï¼ˆNix ç”¨æˆ·æ¨èï¼‰

```nix
home-manager = {
  url = "github:nix-community/home-manager";
  nixpkgs.follows = "nixpkgs";
};
```

### Flakes æ”¯æŒ

```nix
inputs = {
  nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
  nvimdots.url = "github:ayamir/nvimdots";
  home-manager = {
    url = "github:nix-community/home-manager";
    nixpkgs.follows = "nixpkgs";
  };
};
```

---

### é™æ€é“¾æ¥ä¸åŠ¨æ€åº“æ£€æŸ¥

ä½ å¯ä»¥ä½¿ç”¨ `ldd <binary>` æ£€æŸ¥æŸä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ‰€ä¾èµ–çš„åŠ¨æ€åº“ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æ„å»ºæ—¥å¿—ï¼ˆé€šè¿‡ `mason.nvim` çš„ UI æŸ¥çœ‹ï¼‰æŸ¥çœ‹æ„å»ºæœŸé—´æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚

å¦‚æœè¿™äº›ä¾èµ–é¡¹å­˜åœ¨äº `nixpkgs` ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥æ‰¾å¯¹åº”çš„ `*.nix` æ–‡ä»¶æ‰¾åˆ°ä½ éœ€è¦çš„åŒ…ã€‚

å¦‚æœä½ å¸Œæœ›ç¨³å¦¥ä¸€äº›ï¼Œè¿™é‡Œåˆ—å‡ºäº† `mason-registry` ä¸­å·²æ³¨å†Œçš„æ‰€æœ‰åŒ…æ‰€éœ€çš„ä¾èµ–é¡¹ï¼š
- `libamd` â†’ https://github.com/zship/libamd
- `libc` â†’ https://www.gnu.org/software/libc/

---

å¦‚éœ€è¿›ä¸€æ­¥å¸®åŠ©é…ç½® Neovim + Mason + LSP æˆ– NixOS æ”¯æŒï¼Œè¯·å‘Šè¯‰æˆ‘ï¼


ä»¥ä¸‹æ˜¯ä½ ä¸Šä¼ çš„å››ä¸ªæ–‡ä»¶å†…å®¹çš„å®Œæ•´ä¸­æ–‡ç¿»è¯‘ï¼š

---

## ğŸ“„ NixOS-Support.mdï¼ˆNixOS æ”¯æŒï¼‰

### lazy-lock.json çš„æ›´æ–°æœºåˆ¶

å½“ `lazy-lock.fixed.json` çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆå³ä¸Šæ¸¸çš„ `lazy-lock.json` è¢«ä¿®æ”¹ï¼‰ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ `lazy-lock.json` æ–‡ä»¶ã€‚æ–°æ–‡ä»¶æ˜¯é€šè¿‡å°†ç°æœ‰çš„ `lazy-lock.json`ï¼ˆæœªè¢« `nix` ç®¡ç†ï¼‰ä¸ `lazy-lock.fixed.json` åˆå¹¶ç”Ÿæˆçš„ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`lazy-lock.fixed.json` ä¸­çš„ç‰ˆæœ¬ä¼˜å…ˆçº§æ›´é«˜ã€‚è¿™æ„å‘³ç€ï¼š
- å·²ç»ç”±ä¸Šæ¸¸ç®¡ç†çš„æ’ä»¶å°†ä½¿ç”¨ `lazy-lock.fixed.json` ä¸­çš„ç‰ˆæœ¬ï¼›
- æ–°å¢ä½†å°šæœªæäº¤åˆ°ä¸Šæ¸¸çš„æ’ä»¶åˆ™ä¼šè¢«ä¿ç•™ã€‚

---

### å¦‚ä½•æ·»åŠ ä¾èµ–é¡¹ï¼Ÿ

ä½ åº”è¯¥å°†æ„å»ºæ­¤ä¾èµ–æ‰€éœ€çš„å†…å®¹ï¼ˆåŒ…æ‹¬ `include`ã€`lib` å’Œ `pkgconfig`ï¼‰æ·»åŠ åˆ° `programs.neovim.extraDependentPackages` ä¸­ã€‚

ä¾‹å¦‚ï¼Œå¯¹äºè¿è¡Œæ—¶ä¾èµ–ï¼Œä½ å¯ä»¥å°†å¯¹åº”çš„ä¾èµ–é¡¹æ·»åŠ åˆ° `home.packages` æˆ– `programs.neovim.extraPackages` ä¸­ã€‚

> **æ³¨æ„**ï¼š  
`home.packages` æ˜¯ç”¨æˆ·ä½œç”¨åŸŸå†…çš„æœ‰æ•ˆé…ç½®ï¼Œè€Œ `programs.neovim.extraPackages` æ˜¯ Neovim ä½œç”¨åŸŸå†…çš„å…¨å±€é…ç½®ã€‚æŸäº›è¯­è¨€å¯èƒ½è¿˜éœ€è¦ä½¿ç”¨ wrapperï¼Œè¯·å‚è€ƒä¸‹é¢çš„ç¤ºä¾‹è¿›è¡Œé…ç½®ã€‚

---

### ç¤ºä¾‹ NixOS é…ç½®

```nix
{ config, pkgs, lib, ... }:
{
  # å®‰è£…åˆ°ç”¨æˆ·ä½œç”¨åŸŸ
  home.packages = with pkgs; [
    go
  ];

  programs.neovim = {
    # ä»…å¯¹ Neovim å¯è§çš„åŒ…
    nvimdots = {
      # æ„å»ºæ‰€éœ€ä¾èµ–ï¼ˆincludeã€libã€pkgconfigï¼‰
      extraDependentPackages = with pkgs; [ icu ];
      
      # Haskell åŒ…å¯é€šè¿‡ nvimdots é€‰é¡¹è½»æ¾å®‰è£…
      extraHaskellPackages = hs: with hs; [ ghcup ];
    };

    # å…¶ä»–è¿è¡Œæ—¶ä¾èµ–åŒ…
    extraPackages = with pkgs; [
      go
      # æŸäº›è¯­è¨€éœ€è¦ä½¿ç”¨ wrapper
      rWrapper.override {
        packages = with pkgs.rPackages; [
          # R åŒ…åˆ—è¡¨
        ];
      }
    ];
  };
}
```

---

### Home Manager é…ç½®ï¼ˆNix ç”¨æˆ·æ¨èï¼‰

```nix
home-manager = {
  url = "github:nix-community/home-manager";
  nixpkgs.follows = "nixpkgs";
};
```

---

### Flakes æ”¯æŒ

```nix
inputs = {
  nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
  nvimdots.url = "github:ayamir/nvimdots";
  home-manager = {
    url = "github:nix-community/home-manager";
    nixpkgs.follows = "nixpkgs";
  };
};
```

---

### NixOS é…ç½®ç‰‡æ®µ

```nix
{ config, pkgs, lib, ... }:
let
  inherit (pkgs) callPackage fetchFromGitHub;
  inherit (builtins) fetchTarball;
  homeDir = builtins.getEnv "HOME";
in
{
  # è‡ªåŠ¨åƒåœ¾å›æ”¶
  nix = {
    gc = {
      automatic = true;
      options = "--max-freed $((25 * 1024**3 - 1024 * $(df -P -k /nix/store | tail -n 1 | awk '{ print $4 }')))";
    };
    package = pkgs.nixUnstable;
    # å¯ç”¨ flake å’Œå®éªŒæ€§å‘½ä»¤
    extraOptions = ''
      auto-optimise-store = true
      experimental-features = nix-command flakes
      keep-outputs = true
      keep-derivations = true
      trusted-users = root

flakes
keep-outputs = true
keep-derivations = true
trusted-users = root ${username}
'' + lib.optionalString (pkgs.system == "aarch64-darwin") ''
extra-platforms = x86_64-darwin aarch64-darwin
'';
  };
  environment = {
    systemPackages = with pkgs; [
      llvmPackages
    ];

    # å°† nix å®‰è£…çš„ shell åŠ å…¥ /etc/shells
    shells = with pkgs; [
      zsh
    ];

    # è®¾ç½®ç¯å¢ƒå˜é‡ä¼ é€’ç»™ zshrc
    variables = {
      PATH = "${pkgs.llvmPackages.out}/bin:$PATH";
    };
  };

  services = {
    # è‡ªåŠ¨å‡çº§ nix åŒ…å’Œå®ˆæŠ¤è¿›ç¨‹
    nix-daemon.enable = true;
  };
}
```

---

## ğŸ“¦ Plugins.mdï¼ˆæ’ä»¶åˆ—è¡¨ï¼‰

### æ’ä»¶ä¾èµ–å…³ç³»å›¾

ä»¥ä¸‹æ˜¯éƒ¨åˆ†æ’ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ˆä»¥ Graphviz æ ¼å¼è¡¨ç¤ºï¼‰ï¼š

```
"cmp-latex-symbols" -> "cmp-tabnine (opt)" [color="0.649 0.701 0.701" style="dashed"];
"cmp-tabnine (opt)" -> "codeium.nvim (opt)" [color="0.649 0.701 0.701" style="dashed"];
"nui.nvim (opt)" -> "codeium.nvim (opt)" [color="0.649 0.701 0.701" style="dashed"];
"codeium.nvim (opt)" -> "nvim-cmp" [color="0.649 0.701 0.701" style="dashed"];
"friendly-snippets" -> "LuaSnip" [color="0.649 0.701 0.701" style="dashed"];
CursorHold -> "Comment.nvim" [color="0.649 0.701 0.701"];
CursorHold -> "gitsigns.nvim" [color="0.649 0.701 0.701"];
CursorHold -> "which-key.nvim" [color="0.649 0.701 0.701"];
CursorHold -> "mini.align" [color="0.649 0.701 0.701"];
CursorHold -> "paint.nvim" [color="0.649 0.701 0.701"];
"mason-null-ls.nvim" -> "none-ls.nvim" [color="0.649 0.701 0.701" style="dashed"];
"plenary.nvim" -> "none-ls.nvim" [color="0.649 0.701 0.701" style="dashed"];
CursorHold -> "none-ls.nvim" [color="0.649 0.701 0.701"];
"mason-lspconfig.nvim" -> "mason.nvim" [color="0.649 0.701 0.701" style="dashed"];
"mason.nvim" -> "nvim-lspconfig" [color="0.649 0.701 0.701" style="dashed"];
"nvim-lspconfig" -> "lualine.nvim" [color="0.649 0.701 0.701"];
"nvim-lspconfig" -> "mason.nvim" [color="0.649 0.701 0.701"];
"lspsaga.nvim" -> "lualine.nvim" [color="0.649 0.701 0.701"];
LspAttach -> "neodim" [color="0.649 0.701 0.701"];
LspAttach -> "aerial.nvim" [color="0.649 0.701 0.701"];
LspAttach -> "glance.nvim" [color="0.649 0.701 0.701"];
LspAttach -> "fidget.nvim" [color="0.649 0.701 0.701"];
LspAttach -> "lsp-format-modifications.nvim" [color="0.649 0.701 0.701"];
"nvim-treesitter" -> "neodim" [color="0.649 0.701 0.701" style="dashed"];
"self-contained" -> "persisted.nvim" [color="0.649 0.701 0.701"];
"self-contained" -> "toggleterm.nvim" [color="0.649 0.701 0.701"];
"self-contained" -> "nvim-bufdel" [color="0.649 0.701 0.701"];
"self-contained" -> "nvim-bqf" [color="0.649 0.701 0.701"];
"fzf" -> "nvim-bqf" [color="0.649 0.701 0.701" style="dashed"];
"self-contained" -> "nvim-dap" [color="0.649 0.701 0.701"];
"nvim-dap" -> "nvim-dap-ui" [color="0.649 0.701 0.701" style="dashed"];
"plenary.nvim" -> "telescope-undo.nvim" [color="0.649 0.701 0.701" style="dashed"];
"telescope-undo.nvim" -> "telescope.nvim" [color="0.649 0.701 0.701" style="dashed"];
"telescope.nvim" -> "telescope-fzf-native.nvim" [color="0.649 0.701 0.701"];
"telescope-fzf-native.nvim" -> "search.nvim" [color="0.649 0.701 0.701" style="dashed"];
"search.nvim" -> "telescope-frecency.nvim" [color="0.649 0.701 0.701"];
```

---

### æ’ä»¶åˆ†ç±»

#### è¡¥å…¨ç›¸å…³
- **`neovim/nvim-lspconfig`**ï¼šNeovim åŸç”Ÿ LSP é…ç½®
- **`williamboman/mason.nvim`**ï¼šç”¨äºç®¡ç† LSP/DAP æœåŠ¡å™¨ã€æ£€æŸ¥å·¥å…·å’Œæ ¼å¼åŒ–å·¥å…·çš„åŒ…ç®¡ç†å™¨
- **`williamboman/mason-lspconfig.nvim`**ï¼šç»“åˆ `nvim-lspconfig` ä½¿ç”¨ `mason.nvim`
- **`folke/neoconf.nvim`**ï¼šç”¨äºç®¡ç†å…¨å±€å’Œé¡¹ç›®æœ¬åœ°è®¾ç½®
- **`Jint-lzxy/lsp_signature.nvim`**ï¼šåœ¨è¡¥å…¨å‡½æ•°å‚æ•°æ—¶æ˜¾ç¤ºç­¾å
- **`glepnir/lspsaga.nvim`**ï¼šæä¾›æ›´å¥½çš„ LSP åŠŸèƒ½ä½“éªŒ
- **`nvim-tree/nvim-web-devicons`**ï¼šnerdfont å›¾æ ‡æº
- **`stevearc/aerial.nvim`**ï¼šä»£ç å¤§çº²çª—å£ï¼Œä¾¿äºæµè§ˆå’Œå¿«é€Ÿå¯¼èˆª

#### DAPï¼ˆè°ƒè¯•é€‚é…å™¨åè®®ï¼‰
- **`DNLHC/glance.nvim`**ï¼šé¢„è§ˆã€å¯¼èˆªå’Œç¼–è¾‘ LSP ä½ç½®
- **`joechrisellis/lsp-format-modifications.nvim`**ï¼šéƒ¨åˆ†æ ¼å¼åŒ–ä¿®æ”¹çš„ä»£ç 
- **`nvimtools/none-ls.nvim`**ï¼šé€šè¿‡ Lua ä½¿ç”¨ Neovim ä½œä¸ºè¯­è¨€æœåŠ¡å™¨
- **`vim-lua/plenary.nvim`**ï¼šLua å‡½æ•°é›†åˆ
- **`jay-babu/mason-null-ls.nvim`**ï¼šç»“åˆ `null-ls` ä½¿ç”¨ `mason.nvim`
- **`hrsh7th/nvim-cmp`**ï¼šNeovim çš„è‡ªåŠ¨è¡¥å…¨æ’ä»¶
- **`L3MON4D3/LuaSnip`**ï¼šç”¨äº `nvim-cmp` çš„ snippets å¼•æ“
- **`rafamadriz/friendly-snippets`**ï¼š`LuaSnip` çš„ snippets æ¥æº
- **`lukas-reineke/cmp-under-comparator`**ï¼šä¸º `nvim-cmp` æä¾›æ›´å¥½çš„æ’åºæ”¯æŒ

#### ç¼–è¾‘å¢å¼º
- **`mfussenegger/nvim-treehopper`**ï¼šåƒ `hop.nvim` ä¸€æ ·é€‰æ‹©æ–‡æœ¬å¯¹è±¡
- **`nvim-treesitter/nvim-treesitter-textobjects`**ï¼šåœ¨æ–‡æœ¬å¯¹è±¡ä¹‹é—´ç§»åŠ¨
- **`windwp/nvim-ts-autotag`**ï¼šæ›´å¿«çš„ `vim-closetag`
- **`nvim-treesitter-context`**ï¼šæ˜¾ç¤ºå½“å‰ç¼“å†²åŒºå†…å®¹çš„ä¸Šä¸‹æ–‡
- **`JoosepAlviste/nvim-ts-context-commentstring`**ï¼šåŸºäºä¸Šä¸‹æ–‡çš„æ³¨é‡Šå­—ç¬¦ä¸²å¤„ç†
- **`LangKevin/nvim-bqf`**ï¼šæ›´å¼ºå¤§çš„ quickfix æ’ä»¶
- **`ray-x/go.nvim`**ï¼šGolang æ’ä»¶
- **`mrcjkb/rustaceanvim`**ï¼šRust æ’ä»¶
- **`Saecki/crates.nvim`**ï¼šç®¡ç† `crates.io` ä¾èµ–
- **`iamcco/markdown-preview.nvim`**ï¼šæ¸²æŸ“ Markdown é¢„è§ˆ
- **`chrisbra/csv.vim`**ï¼šCSV å¤„ç†æ’ä»¶

#### å·¥å…·ç±»
- **`nvim-treesitter`**ï¼šè¯­æ³•é«˜äº®å’Œè§£æåº“
- **`lualine.nvim`**ï¼šçŠ¶æ€æ æ’ä»¶
- **`local-highlight.nvim`**ï¼šå±€éƒ¨é«˜äº®æ’ä»¶
- **`nvim-ts-autotag`**ï¼šè‡ªåŠ¨é—­åˆæ ‡ç­¾
- **`rainbow-delimiters.nvim`**ï¼šå½©è™¹æ‹¬å·æ’ä»¶
- **`nvim-treesitter-textobjects`**ï¼šæ–‡æœ¬å¯¹è±¡æ“ä½œæ’ä»¶
- **`gitsigns.nvim`**ï¼šGit è¡Œçº§æ ‡è®°
- **`Comment.nvim`**ï¼šæ™ºèƒ½æ³¨é‡Šæ’ä»¶
- **`which-key.nvim`**ï¼šå¿«æ·é”®æç¤ºæ’ä»¶
- **`mini.align`**ï¼šå¿«é€Ÿå¯¹é½æ’ä»¶
- **`paint.nvim`**ï¼šé¢œè‰²ä¸»é¢˜ç»˜åˆ¶æ’ä»¶
- **`persisted.nvim`**ï¼šä¼šè¯ä¿å­˜æ’ä»¶
- **`toggleterm.nvim`**ï¼šæµ®åŠ¨ç»ˆç«¯æ’ä»¶
- **`nvim-bufdel`**ï¼šç¼“å†²åŒºåˆ é™¤æ’ä»¶
- **`nvim-bqf`**ï¼šæ”¹è¿›çš„ quickfix æ’ä»¶
- **`vim-cool`**ï¼šæœç´¢åå–æ¶ˆé«˜äº®æ’ä»¶
- **`vim-fugitive`**ï¼šGit æ’ä»¶
- **`vim-matchup`**ï¼šåŒ¹é…æ’ä»¶
- **`vim-rhubarb`**ï¼šGitHub å¿«æ·æ–¹å¼
- **`vim-sleuth`**ï¼šè‡ªåŠ¨æ£€æµ‹ç¼©è¿›è®¾ç½®
- **`which-key.nvim`**ï¼šå¿«æ·é”®æç¤ºæ’ä»¶
- **`wilder.nvim`**ï¼šå‘½ä»¤è¡Œå¢å¼ºæ’ä»¶

---

## âš™ï¸ Prerequisites.mdï¼ˆå‰ç½®æ¡ä»¶ï¼‰

### Windows ä¸Šå‰ªè´´æ¿é—®é¢˜

è¯·å‚è€ƒ [Neovim å®˜æ–¹ FAQ](https://github.com/neovim/neovim/wiki/FAQ#how-to-use-the-windows-clipboard-from-wsl)ï¼Œå¹¶ç¡®ä¿ `win32yank.exe` å·²æ·»åŠ åˆ°ä½ çš„ `$PATH` ç¯å¢ƒå˜é‡ä¸­ã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ `clip.exe` è¿›è¡Œå¤åˆ¶æ“ä½œï¼Œå› ä¸ºå®ƒä¸èƒ½æ­£ç¡®å¤„ç† UTF-8 ç¼–ç å­—ç¬¦ä¸²ã€‚

æ›´å¤šä¿¡æ¯è¯·å‚è§æ­¤ issueï¼š  
[https://github.com/ayamir/nvimdots/issues/762](https://github.com/ayamir/nvimdots/issues/762)

---

### macOS ç¼–è¯‘å™¨ä¾èµ–é¡¹

è¯·ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªä»¥ä¸‹å·¥å…·å­˜åœ¨äºä½ çš„ `$PATH` ä¸­ï¼ˆæ ¹æ®ä½ ä½¿ç”¨çš„è¯­è¨€å†³å®šï¼‰ï¼š
- `clang++`
- `clang`
- `gcc`
- `g++`

#### macOS ç”¨æˆ·ï¼š
é€šå¸¸å¯ä»¥é€šè¿‡å®‰è£… LLVM æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒLLVM åŒ…å«äº†å®Œæ•´çš„å·¥å…·é“¾ï¼š

```bash
brew install llvm
```

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `nix-darwin`ï¼Œè¯·å°† `pkgs.llvm` æ·»åŠ åˆ° `environment.systemPackages` ä¸­ï¼š

ç¤ºä¾‹é…ç½®æ–‡ä»¶ `darwin-configuration.nix`ï¼š

```nix
{ config, pkgs, lib, ... }:
let
  inherit (pkgs) callPackage fetchFromGitHub;
  inherit (builtins) fetchTarball;
  homeDir = builtins.getEnv "HOME";
in
{
  # è‡ªåŠ¨æ¸…ç† Nix å­˜å‚¨
  nix = {
    gc = {
      automatic = true;
      options = "--max-freed $((25 * 1024**3 - 1024 * $(df -P -k /nix/store| tail -n 1| awk '{ print $4 }')))";

    };
    package = pkgs.nixUnstable;
    extraOptions = ''
      auto-optimise-store = true
      experimental-features = nix-command flakes
      keep-outputs = true
      keep-derivations = true
      trusted-users = root

flakes
keep-outputs = true
keep-derivations = true
trusted-users = root ${username}
'' + lib.optionalString (pkgs.system == "aarch64-darwin") ''
extra-platforms = x86_64-darwin aarch64-darwin
'';
  };
  environment = {
    systemPackages = with pkgs; [
      llvmPackages
    ];

    # å°† nix å®‰è£…çš„ shell åŠ å…¥ /etc/shells
    shells = with pkgs; [
      zsh
    ];

    # è®¾ç½®ç¯å¢ƒå˜é‡ä¼ é€’ç»™ zshrc
    variables = {
      PATH = "${pkgs.llvmPackages.out}/bin:$PATH";
    };
  };

  services = {
    # è‡ªåŠ¨å‡çº§ nix åŒ…å’Œå®ˆæŠ¤è¿›ç¨‹æœåŠ¡
    nix-daemon.enable = true;
  };
}
```

---

## âš™ï¸ Usage.mdï¼ˆä½¿ç”¨è¯´æ˜ï¼‰

### ä¿®æ”¹é…ç½®

ä½ å¯ä»¥åœ¨ `user/settings.lua` ä¸­è‡ªå®šä¹‰é…ç½®ï¼š

#### åˆå¹¶æ¡ç›®ï¼š

```lua
settings["lsp_deps"] = {
  "zls", -- Zig è¯­è¨€æœåŠ¡å™¨
}
```

ç»“æœå¦‚ä¸‹ï¼š

```lua
{
  "bashls",
  "clangd",
  "html",
  "jsonls",
  "lua_ls",
  "pylsp",
  "zls"
}
```

#### è¦†ç›–æ¡ç›®ï¼š

```lua
settings["lsp_deps"] = function(defaults)
  return {
    defaults[5], -- "lua_ls"
    defaults[6], -- "pylsp"
    "zls", -- Zig è¯­è¨€æœåŠ¡å™¨
  }
end
```

ç»“æœå¦‚ä¸‹ï¼š

```lua
{
  "lua_ls",
  "pylsp",
  "zls"
}
```

---

### ä¸»é¢˜ä¸é«˜äº®è¦†ç›–

ä½ å¯ä»¥é€šè¿‡ `require("modules.utils.icons").get(category, add_space?)` è·å–å›¾æ ‡ã€‚

å›¾æ ‡åˆ—è¡¨å¯åœ¨æ­¤æŸ¥çœ‹ï¼š  
[å›¾æ ‡åˆ—è¡¨é“¾æ¥](https://github.com/ayamir/nvimdots/blob/main/lua/modules/utils/icons.lua)

#### ç¤ºä¾‹é«˜äº®è¦†ç›–ï¼š

```lua
highlight_overrides = {
  all = function(colors)
    return {
      NvimTreeNormal = { fg = colors.none },
      CmpBorder = { fg = "#3E4145" },
    }
  end,
  latte = function(latte)
    return {
      Normal = { fg = ucolors.darken(latte.base, 0.7, latte.mantle) },
    }
  end,
  frappe = function(frappe)
    return {
      ["@comment"] = { fg = frappe.surface2, style = { "italic" } },
    }
  end,
  macchiato = function(macchiato)
    return {
      LineNr = { fg = macchiato.overlay1 },
    }
  end,
  mocha = function(mocha)
    return {
      Comment = { fg = mocha.flamingo },
    }
  end,
}
```

---

å¦‚éœ€è¿›ä¸€æ­¥å¸®åŠ©é…ç½® Neovim + Mason + LSP æˆ– NixOS æ”¯æŒï¼Œè¯·å‘Šè¯‰æˆ‘ï¼



 